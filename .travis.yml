dist: xenial
language: python
python:
- 3.6
- 3.7
notifications:
  email:
  - nick.hand@phila.gov
cache:
  directories:
  - "$HOME/.cache/pip"
  - "$HOME/.conda"
before_install:
- wget http://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O miniconda.sh
- chmod +x miniconda.sh
- "./miniconda.sh -b -p $HOME/miniconda"
- export PATH=$HOME/miniconda/bin:$PATH
install:
- conda install --yes python=$TRAVIS_PYTHON_VERSION
- conda install --yes -c conda-forge --file requirements.txt
- conda info
- pip install .[dev]
script:
- py.test . --cov schuylkill
after_success:
- coveralls
deploy:
  provider: pypi
  distributions: sdist
  user: __token__
  skip_existing: true
  on:
    tags: true
    condition: $TRAVIS_PYTHON_VERSION = "3.7"
  password:
    secure: pVy6KdWoESi72CAfu9dlnh7CP9Rj1lvvIUVIe/tK98zO5EJo2hgcpT6JDE+WoxVe3CPnMhg7WIt9LGQFgUyVZgqsvnkhAjcZW+cfGakv5+SvnQTTj39e6kGRxCh1pfr2WPwWOTu8qfYNVUWzdTSMQw+B1V3somgEMsBo0R/9jP42qCxCiwkZEMizgumsPU2ceXWzUthaPNihZh94dkyOCJ2B+ekGZ3sedkNL/GhdLVElTkUklaDVrvYvp8y46oxP6I4D6jLv3QLkEy4vJxET3dOD5HDnm62aWmliVIQnrk27/Vdm/nr9U5YEZNMfh7tkj5wsU5DVhcPlxI/Tdc0e8vmc06CSGVrO7wyMSjnjNbodqb1ibWN8nKgA/cYEsSC5U+J8zE9FXUke4FSj/KSZDFINsTkVgoXqwekKvu75EHEjSe14TpYj6C149sD1rOFFGcoJyv/2kUzo83Ns81pq4il8QnC8N8uelV7ENulolIBM/6ryIvGT/f8RBdn7rR1P0AEbHY3GS9mS1MftMYNBFl3z/yRvKFyCj7dBs7iKV0FTAjPtBna/hveuJfC3VXByp8MpjQhY/1QgRzr0x5gJPLlRAs/zOymvrJCFx2k10SrC9LTRKJWGh3GVxuMBOLduHdUp38ND90DuyiYRdw3DLi8DGgrQdDv87xdin6M3MsU=
